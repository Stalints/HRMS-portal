{% extends 'employee/base.html' %}
{% block page_title %}My Profile{% endblock %}

{% block content %}

<!-- PROFILE HEADER -->
<div class="profile-header card">

    <div class="profile-left">
        {% if profile.profile_image %}
            <img src="{{ profile.profile_image.url }}" class="profile-img" alt="Profile Image">
        {% else %}
            <div class="profile-avatar">
                {{ request.user.username|slice:":1"|upper }}
            </div>
        {% endif %}
    </div>

    <div class="profile-info">
        <h2>{{ request.user.get_full_name|default:request.user.username }}</h2>
        <p class="designation">{{ profile.designation|default:"" }}</p>
        <p class="department">
            {{ profile.department|default:"" }}{% if profile.department %} Department{% endif %}
        </p>
    </div>

</div>

<!-- DETAILS GRID -->
<div class="profile-grid">

    <!-- PERSONAL INFO -->
    <div class="card profile-card">
        <h3>üë§ Personal Information</h3>
        <div class="info-row">
            <span>Email</span>
            <strong>{{ request.user.email }}</strong>
        </div>
        <div class="info-row">
            <span>Username</span>
            <strong>{{ request.user.username }}</strong>
        </div>
    </div>

    <!-- WORK INFO -->
    <div class="card profile-card">
        <h3>üíº Work Information</h3>
        <div class="info-row">
            <span>Employee ID</span>
            <strong>{{ profile.emp_id }}</strong>
        </div>
        <div class="info-row">
            <span>Date of Joining</span>
            <strong>{{ profile.date_joined }}</strong>
        </div>
        <div class="info-row">
            <span>Status</span>
            <span class="status-badge">Active</span>
        </div>
    </div>

</div>

<!-- ‚úÖ EDIT PROFILE (NEW) -->
<div class="card profile-card" style="margin-top: 20px;">
    <h3>‚úèÔ∏è Edit Profile</h3>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="info-row" style="display:block; margin-bottom:12px;">
            <label><strong>Profile Picture</strong></label><br>
            <input type="file" name="profile_image" accept="image/*">
        </div>

        <div class="info-row" style="display:block; margin-bottom:12px;">
            <label><strong>Employee ID</strong></label><br>
            <input type="text" name="emp_id" value="{{ profile.emp_id }}" class="input">
        </div>

        <div class="info-row" style="display:block; margin-bottom:12px;">
            <label><strong>Department</strong></label><br>
            <input type="text" name="department" value="{{ profile.department }}" class="input">
        </div>

        <div class="info-row" style="display:block; margin-bottom:12px;">
            <label><strong>Designation</strong></label><br>
            <input type="text" name="designation" value="{{ profile.designation }}" class="input">
        </div>

        <div class="info-row" style="display:block; margin-bottom:12px;">
            <label><strong>Phone</strong></label><br>
            <input type="text" name="phone" value="{{ profile.phone }}" class="input">
        </div>

        <button type="submit" class="btn-primary">Save Changes</button>
    </form>
</div>

{% endblock %}