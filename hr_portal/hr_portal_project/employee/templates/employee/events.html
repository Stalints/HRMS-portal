{% extends 'employee/base.html' %}
{% block page_title %}Events{% endblock %}

{% block content %}

<div class="card">

    <!-- Header -->
    <h3>ðŸ“… {{ month_name }} {{ year }}</h3>

    <!-- Dropdown -->
    <form method="get" style="margin:15px 0; display:flex; gap:10px;">
        <select name="month" class="calendar-select">
            {% for m in months %}
                <option value="{{ m }}" {% if m == month %}selected{% endif %}>
                    {{ m }}
                </option>
            {% endfor %}
        </select>

        <select name="year" class="calendar-select">
            {% for y in years %}
                <option value="{{ y }}" {% if y == year %}selected{% endif %}>
                    {{ y }}
                </option>
            {% endfor %}
        </select>

        <button type="submit" class="btn-primary">Search</button>
    </form>

    <!-- Calendar Table -->
    <table class="calendar-table">
        <thead>
            <tr>
                <th>Mon</th><th>Tue</th><th>Wed</th>
                <th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th>
            </tr>
        </thead>
        <tbody>
            {% for week in calendar %}
            <tr>
                {% for day in week %}
                    {% if day == 0 %}
                        <td></td>
                    {% else %}
                        <td class="{% if day in event_dict %}event-day{% endif %}">
                            <strong>{{ day }}</strong>

                            {% for key, value in event_dict.items %}
                                {% if key == day %}
                                    {% for event in value %}
                                        <div class="event-item">
                                            {{ event.title }}
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}

                        </td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}